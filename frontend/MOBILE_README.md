# ShotSpot Mobile App - Frontend

This directory contains the Capacitor-powered mobile app setup for ShotSpot.

## What's in this Directory?

### Generated Directories (Not in Git)

- **`android/`** - Native Android project (Android Studio)
- **`ios/`** - Native iOS project (Xcode)
- **`dist/`** - Built web assets that get copied to mobile platforms

These directories are automatically generated by Capacitor and excluded from version control.

## Quick Start

### Build and Sync
```bash
# Build web app and sync to mobile platforms
npm run mobile:sync
```

### Open in Native IDE
```bash
# Android
npm run mobile:android

# iOS (macOS only)
npm run mobile:ios
```

## Mobile Development Workflow

1. **Make changes** to React code in `src/`
2. **Test in browser** during development:
   ```bash
   npm run dev
   ```
3. **Build for mobile** when ready:
   ```bash
   npm run build
   npx cap sync
   ```
4. **Test on device/emulator** via native IDE

## Key Files

- **`capacitor.config.ts`** - Capacitor configuration (app ID, name, plugins)
- **`package.json`** - Mobile build scripts
- **`public/service-worker.js`** - Offline support (automatically copied to mobile)

## Platform Structure

### Android (`android/`)
```
android/
├── app/
│   ├── src/main/
│   │   ├── assets/public/     # Web app assets
│   │   ├── java/              # Native Android code
│   │   ├── res/               # Resources (icons, splash screens)
│   │   └── AndroidManifest.xml
│   └── build.gradle           # App-level build config
├── gradle/                    # Gradle wrapper
└── build.gradle               # Project-level build config
```

### iOS (`ios/`)
```
ios/
├── App/
│   ├── App/
│   │   ├── public/            # Web app assets
│   │   ├── Assets.xcassets/   # Images and icons
│   │   └── Info.plist         # iOS app configuration
│   ├── App.xcodeproj/         # Xcode project
│   └── Podfile                # CocoaPods dependencies
└── Pods/                      # Native iOS dependencies
```

## Regenerating Mobile Projects

If you need to regenerate the mobile platform projects:

```bash
# Remove platforms
rm -rf android ios

# Add them back
npm run build
npx cap add android
npx cap add ios
```

⚠️ **Warning**: This will reset any native customizations you made directly in the native projects.

## Native Customizations

For advanced mobile features, you may need to edit native files:

### Android
- **Permissions**: `android/app/src/main/AndroidManifest.xml`
- **Icons**: `android/app/src/main/res/mipmap-*/`
- **Splash screen**: `android/app/src/main/res/drawable/`
- **App config**: `android/app/src/main/res/values/`

### iOS
- **Permissions**: `ios/App/App/Info.plist` (add permission descriptions)
- **Icons**: `ios/App/App/Assets.xcassets/AppIcon.appiconset/`
- **Splash screen**: `ios/App/App/Assets.xcassets/Splash.imageset/`
- **Capabilities**: Configure in Xcode → Signing & Capabilities

## Troubleshooting

### "Android/iOS directory not found"
Run: `npm run mobile:sync` (automatically creates platforms)

### "Build failed in Android Studio"
1. Clean project: Build → Clean Project
2. Sync Gradle files
3. Invalidate caches: File → Invalidate Caches / Restart

### "CocoaPods not installed" (iOS)
```bash
sudo gem install cocoapods
cd ios/App
pod install
```

### White screen on launch
1. Check that service-worker.js is in dist/
2. Verify capacitor.config.ts webDir is 'dist'
3. Run: `npm run build && npx cap sync`

## Documentation

For complete mobile development documentation, see:
- **[/MOBILE.md](../MOBILE.md)** - Comprehensive mobile app guide
- **[Capacitor Docs](https://capacitorjs.com/docs)** - Official Capacitor documentation
- **[Capacitor React Guide](https://capacitorjs.com/solution/react)** - React-specific guide

## Support

For mobile-specific issues:
1. Check [MOBILE.md](../MOBILE.md) troubleshooting section
2. Review native IDE console logs
3. Check browser console in mobile app (Chrome DevTools or Safari Inspector)
4. Open an issue on GitHub with device details and error logs
